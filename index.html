<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Minuecus Post</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Old+Standard+TT:wght@400;700&family=Source+Serif+Pro:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Article Detail Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <button class="modal-close" id="modal-close">&times;</button>
            <article class="modal-content" id="modal-content">
                <!-- Populated by JS -->
            </article>
        </div>
    </div>

    <!-- Breaking News Banner -->
    <div class="breaking-banner" id="breaking-banner" style="display: none;">
        <span class="breaking-label">URGENTE</span>
        <span class="breaking-text" id="breaking-text"></span>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-top">
                <div class="header-left">
                    <span class="edition">Edici√≥n Rep√∫blica</span>
                    <div class="header-widgets">
                        <div class="weather-widget" id="weather-widget">
                            <span class="weather-icon" id="weather-icon"></span>
                            <span class="weather-temp" id="weather-temp"></span>
                        </div>
                        <div class="dollar-rate" id="dollar-rate">
                            <span class="dollar-label">D√≥lar:</span>
                            <span class="dollar-value" id="dollar-value"></span>
                        </div>
                    </div>
                </div>
                <div class="header-center">
                    <a href="#" class="logo-link" id="home-link">
                        <h1 class="logo">The Minuecus Post</h1>
                    </a>
                    <p class="tagline" id="tagline"></p>
                </div>
                <div class="header-right">
                    <span class="date" id="pub-date"></span>
                </div>
            </div>
            <nav class="nav">
                <ul class="nav-list" id="nav-list">
                    <!-- Populated by JS -->
                </ul>
            </nav>
        </header>

        <!-- Live Updates Banner -->
        <div class="live-updates" id="live-updates" style="display: none;">
            <span class="live-dot"></span>
            <span class="live-label">EN VIVO</span>
            <span class="live-text" id="live-text"></span>
            <span class="live-time" id="live-time"></span>
        </div>

        <!-- Ad Banner -->
        <div class="ad-banner" id="ad-banner">
            <!-- Populated by JS -->
        </div>

        <!-- Main Content -->
        <main class="main">
            <!-- Featured Story -->
            <article class="featured" id="featured">
                <!-- Populated by JS -->
            </article>

            <!-- Top Stories Grid -->
            <section class="top-stories">
                <div class="stories-grid" id="top-stories">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- More Headlines + Sidebar -->
            <div class="bottom-section">
                <section class="more-stories">
                    <h2 class="section-title">M√°s Noticias</h2>
                    <div class="headlines-list" id="more-stories">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <aside class="sidebar">
                    <!-- Poll Widget -->
                    <div class="poll-widget" id="poll-widget">
                        <h3 class="widget-title">Encuesta del D√≠a</h3>
                        <p class="poll-question" id="poll-question"></p>
                        <div class="poll-options" id="poll-options">
                            <!-- Populated by JS -->
                        </div>
                        <p class="poll-total" id="poll-total"></p>
                    </div>

                    <!-- Most Read -->
                    <div class="most-read-widget">
                        <h3 class="widget-title">Lo M√°s Le√≠do</h3>
                        <ol class="most-read-list" id="most-read">
                            <!-- Populated by JS -->
                        </ol>
                    </div>

                    <!-- Sidebar Ad -->
                    <div class="sidebar-ad" id="sidebar-ad">
                        <!-- Populated by JS -->
                    </div>

                    <!-- Newsletter -->
                    <div class="newsletter-widget" id="newsletter-widget">
                        <h3 class="widget-title" id="newsletter-title"></h3>
                        <p class="newsletter-desc" id="newsletter-desc"></p>
                        <div class="newsletter-form">
                            <input type="email" placeholder="tu@correo.com" class="newsletter-input">
                            <button class="newsletter-btn" id="newsletter-btn"></button>
                        </div>
                    </div>

                    <!-- Podcast -->
                    <div class="podcast-widget" id="podcast-widget">
                        <h3 class="widget-title">üéß Podcast</h3>
                        <div class="podcast-content">
                            <p class="podcast-title" id="podcast-title"></p>
                            <p class="podcast-episode" id="podcast-episode"></p>
                            <p class="podcast-desc" id="podcast-desc"></p>
                            <button class="podcast-play">‚ñ∂ Escuchar</button>
                        </div>
                    </div>

                    <!-- Opinion Section -->
                    <div class="opinion-section">
                        <h2 class="section-title">Opini√≥n</h2>
                        <div class="opinion-list" id="opinion">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p class="footer-logo">The Minuecus Post</p>
                <div class="footer-links">
                    <a href="#">T√©rminos</a>
                    <a href="#">Privacidad</a>
                    <a href="#">Contacto</a>
                    <a href="#">Publicidad</a>
                    <a href="#">Suscripciones</a>
                </div>
                <div class="footer-social">
                    <span>S√≠guenos:</span>
                    <a href="#" class="social-link">üìß</a>
                    <a href="#" class="social-link">üì±</a>
                    <a href="#" class="social-link">üåê</a>
                </div>
                <p class="footer-text">¬© 2026 The Minuecus Post. El peri√≥dico oficial de la Rep√∫blica de Minueco.</p>
                <p class="footer-text">Informaci√≥n institucional al servicio de la ciudadan√≠a.</p>
            </div>
        </footer>
    </div>

    <script>
        let newsData = null;

        // Fetch and render news
        async function loadNews() {
            try {
                const response = await fetch('news.json');
                newsData = await response.json();
                renderPage(newsData);
            } catch (error) {
                console.error('Error loading news:', error);
            }
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffHours = Math.floor((now - date) / (1000 * 60 * 60));
            
            if (diffHours < 1) return 'Ahora mismo';
            if (diffHours < 24) return `Hace ${diffHours}h`;
            return date.toLocaleDateString('es-ES', { month: 'short', day: 'numeric' });
        }

        function formatFullDate(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleDateString('es-ES', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function getAllArticles() {
            if (!newsData) return [];
            return [
                newsData.featured,
                ...newsData.topStories,
                ...newsData.moreStories,
                ...newsData.opinion
            ];
        }

        function findArticleById(id) {
            return getAllArticles().find(article => article.id === id);
        }

        function openArticle(id) {
            const article = findArticleById(id);
            if (!article) return;

            const modalContent = document.getElementById('modal-content');
            modalContent.innerHTML = `
                ${article.image ? `<img class="modal-image" src="${article.image}" alt="${article.headline}">` : ''}
                <span class="modal-category">${article.category}</span>
                <h1 class="modal-headline">${article.headline}</h1>
                <div class="modal-meta">
                    <span class="modal-author">Por <strong>${article.author}</strong></span>
                    ${article.role ? `<span class="modal-role">${article.role}</span>` : ''}
                    <span class="modal-date">${formatFullDate(article.timestamp)}</span>
                    <span class="modal-read-time">${article.readTime} de lectura</span>
                </div>
                <div class="modal-body">
                    <p class="modal-summary">${article.summary}</p>
                    ${article.content ? `<p>${article.content}</p>` : ''}
                    ${!article.content ? generateFakeContent(article) : ''}
                </div>
                <div class="modal-footer">
                    <p class="modal-disclaimer">Publicaci√≥n oficial de la Rep√∫blica de Minueco.</p>
                </div>
            `;

            document.getElementById('modal-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function generateFakeContent(article) {
            const paragraphs = [
                `La ciudadan√≠a de Minueco ha recibido esta informaci√≥n con inter√©s, seg√∫n sondeos realizados por el Ministerio de Comunicaciones.`,
                `Fuentes oficiales indicaron que se espera mayor informaci√≥n en las pr√≥ximas horas a medida que se desarrollen los acontecimientos.`,
                `El gabinete ministerial contin√∫a trabajando en los lineamientos institucionales establecidos durante la Primera Cumbre Republicana.`,
                `Se recomienda a la ciudadan√≠a mantenerse informada a trav√©s de los canales oficiales de comunicaci√≥n de la rep√∫blica.`
            ];
            return paragraphs.map(p => `<p>${p}</p>`).join('');
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        function renderPage(data) {
            // Publication info
            document.getElementById('tagline').textContent = data.publication.motto;
            document.getElementById('pub-date').textContent = data.publication.date;

            // Weather widget
            if (data.weather) {
                document.getElementById('weather-icon').textContent = data.weather.icon;
                document.getElementById('weather-temp').textContent = `${data.weather.temp}¬∞C`;
            }

            // Dollar rate
            if (data.finance) {
                const trendIcon = data.finance.trend === 'up' ? '‚Üë' : data.finance.trend === 'down' ? '‚Üì' : '';
                document.getElementById('dollar-value').textContent = `${data.finance.dollarRate} ${data.finance.currency} ${trendIcon}`;
            }

            // Live updates
            if (data.liveUpdates && data.liveUpdates.active) {
                const liveEl = document.getElementById('live-updates');
                document.getElementById('live-text').textContent = data.liveUpdates.story;
                document.getElementById('live-time').textContent = data.liveUpdates.lastUpdate;
                liveEl.style.display = 'flex';
            }

            // Ad banner
            if (data.ads && data.ads.length > 0) {
                const ad = data.ads.find(a => a.type === 'banner') || data.ads[0];
                document.getElementById('ad-banner').innerHTML = `
                    <div class="ad-content">
                        <span class="ad-label">PUBLICIDAD</span>
                        <div class="ad-main">
                            <span class="ad-title">${ad.title}</span>
                            <span class="ad-slogan">${ad.slogan}</span>
                            <span class="ad-description">${ad.description}</span>
                        </div>
                        <span class="ad-cta">${ad.cta} ‚Üí</span>
                    </div>
                `;
            }

            // Sidebar Ad
            if (data.ads && data.ads.length > 1) {
                const sidebarAd = data.ads.find(a => a.type === 'sidebar') || data.ads[1];
                document.getElementById('sidebar-ad').innerHTML = `
                    <span class="ad-label">PUBLICIDAD</span>
                    <p class="sidebar-ad-title">${sidebarAd.title}</p>
                    <p class="sidebar-ad-slogan">${sidebarAd.slogan}</p>
                    <p class="sidebar-ad-desc">${sidebarAd.description}</p>
                    <button class="sidebar-ad-btn">${sidebarAd.cta}</button>
                `;
            }

            // Poll widget
            if (data.poll) {
                document.getElementById('poll-question').textContent = data.poll.question;
                document.getElementById('poll-options').innerHTML = data.poll.options.map(opt => {
                    const percent = Math.round((opt.votes / data.poll.totalVotes) * 100);
                    return `
                        <div class="poll-option">
                            <div class="poll-option-text">${opt.text}</div>
                            <div class="poll-bar-container">
                                <div class="poll-bar" style="width: ${percent}%"></div>
                                <span class="poll-percent">${percent}%</span>
                            </div>
                        </div>
                    `;
                }).join('');
                document.getElementById('poll-total').textContent = `${data.poll.totalVotes.toLocaleString()} votos`;
            }

            // Most Read
            if (data.mostRead) {
                document.getElementById('most-read').innerHTML = data.mostRead.map((item, i) => `
                    <li class="most-read-item clickable" data-id="${item.id}">
                        <span class="most-read-num">${i + 1}</span>
                        <span class="most-read-title">${item.title}</span>
                    </li>
                `).join('');
            }

            // Newsletter
            if (data.newsletter) {
                document.getElementById('newsletter-title').textContent = data.newsletter.title;
                document.getElementById('newsletter-desc').textContent = data.newsletter.description;
                document.getElementById('newsletter-btn').textContent = data.newsletter.cta;
            }

            // Podcast
            if (data.podcast) {
                document.getElementById('podcast-title').textContent = data.podcast.title;
                document.getElementById('podcast-episode').textContent = `${data.podcast.episode} ‚Ä¢ ${data.podcast.duration}`;
                document.getElementById('podcast-desc').textContent = data.podcast.description;
            }

            // Breaking news
            if (data.breaking && data.breaking.active) {
                const banner = document.getElementById('breaking-banner');
                document.getElementById('breaking-text').textContent = data.breaking.text;
                banner.style.display = 'flex';
            }

            // Navigation
            const navList = document.getElementById('nav-list');
            navList.innerHTML = data.sections.map(section => 
                `<li><a href="#${section.toLowerCase()}">${section}</a></li>`
            ).join('');

            // Featured story
            const featured = data.featured;
            document.getElementById('featured').innerHTML = `
                <div class="featured-content clickable" data-id="${featured.id}">
                    ${featured.image ? `<img class="featured-image" src="${featured.image}" alt="${featured.headline}">` : ''}
                    <div class="featured-text">
                        <span class="category">${featured.category}</span>
                        <h2 class="featured-headline">${featured.headline}</h2>
                        <p class="featured-summary">${featured.summary}</p>
                        <div class="meta">
                            <span class="author">Por ${featured.author}</span>
                            <span class="timestamp">${formatTime(featured.timestamp)}</span>
                            <span class="read-time">${featured.readTime} de lectura</span>
                        </div>
                        <span class="read-more">Leer art√≠culo completo ‚Üí</span>
                    </div>
                </div>
            `;

            // Top stories
            const topStories = document.getElementById('top-stories');
            topStories.innerHTML = data.topStories.map(story => `
                <article class="story-card clickable" data-id="${story.id}">
                    ${story.image ? `<img class="story-image" src="${story.image}" alt="${story.headline}">` : ''}
                    <span class="category">${story.category}</span>
                    <h3 class="story-headline">${story.headline}</h3>
                    <p class="story-summary">${story.summary}</p>
                    <div class="meta">
                        <span class="author">Por ${story.author}</span>
                        <span class="timestamp">${formatTime(story.timestamp)}</span>
                    </div>
                </article>
            `).join('');

            // More stories
            const moreStories = document.getElementById('more-stories');
            moreStories.innerHTML = data.moreStories.map(story => `
                <article class="headline-item clickable" data-id="${story.id}">
                    ${story.image ? `<img class="headline-image" src="${story.image}" alt="${story.headline}">` : ''}
                    <div class="headline-text">
                        <span class="category">${story.category}</span>
                        <h4 class="headline-title">${story.headline}</h4>
                        <div class="meta">
                            <span class="timestamp">${formatTime(story.timestamp)}</span>
                        </div>
                    </div>
                </article>
            `).join('');

            // Opinion
            const opinion = document.getElementById('opinion');
            opinion.innerHTML = data.opinion.map(story => `
                <article class="opinion-item clickable" data-id="${story.id}">
                    <h4 class="opinion-title">${story.headline}</h4>
                    <p class="opinion-summary">${story.summary}</p>
                    <div class="meta">
                        <span class="author">${story.author}</span>
                    </div>
                </article>
            `).join('');

            // Add click handlers
            document.querySelectorAll('.clickable').forEach(el => {
                el.addEventListener('click', () => {
                    const id = parseInt(el.dataset.id);
                    openArticle(id);
                });
            });
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            loadNews();

            // Close modal
            document.getElementById('modal-close').addEventListener('click', closeModal);
            document.getElementById('modal-overlay').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) closeModal();
            });

            // Close with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });
        });
    </script>
</body>
</html>
